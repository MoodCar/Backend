{
  "swagger": "2.0",
  "info": {
    "title": "Moodcar",
    "description": "Moodcar의 Express 서버 API",
    "version": "1.0.0"
  },
  "host": "http://ec2-3-39-17-18.ap-northeast-2.compute.amazonaws.com",
  "basePath": "/",
  "schemes": ["http"],
  "paths": {
    "/auth/google": {
      "get": {
        "tags": ["Authorization"],
        "summary": "구글 로그인 호출 API",
        "description": "구글 로그인 API입니다. 호출 시 구글 인증 페이지로 Redirect됩니다.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Redirect to auth/google/callback"
          }
        }
      }
    },
    "/auth/google/callback": {
      "get": {
        "tags": ["Authorization"],
        "summary": "구글 로그인 Callback API",
        "description": "구글 로그인 성공 시에 자동으로 호출되는 Callback API입니다.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Redirect to Original Location"
          },
          "400": {
            "description": "Redirect to auth/google/fail"
          }
        }
      }
    },
    "/auth/google/fail": {
      "get": {
        "tags": ["Authorization"],
        "summary": "구글 인증 실패 Callback API",
        "description": "구글 로그인 실패 시 호출되는 콜백API입니다.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Redirect to auth/google"
          }
        }
      }
    },
    "/logout": {
      "get": {
        "tags": ["Authorization"],
        "summary": "로그아웃 API",
        "description": "인증 세션을 종료하는 로그아웃 API입니다",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Redirect to Original Location"
          }
        }
      }
    },
    "/checklogin": {
      "get": {
        "tags": ["Authorization"],
        "summary": "인증 세션 확인 및 유저 정보",
        "description": "로그인 상태를 확인하고, 로그인되어 있다면 해당 유저의 정보를 받아옵니다.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "example": {
                "email": "test@gmail.com",
                "name": "테스트",
                "provider": "google",
                "providerId": "1452389578978927435",
                "token": "423uncy091nu7b098x17bn039vy48eun0tu12xm908h89"
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "schema": {
              "example": {
                "isSuccess": false,
                "code": 400,
                "message": "Login Required."
              }
            }
          }
        }
      }
    },
    "/users": {
      "get": {
        "tags": ["User"],
        "summary": "전체 유저 정보",
        "description": "전체 유저의 정보를 받아옵니다.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "example": {
                "userInfo": [
                  {
                    "email": "test@gmail.com",
                    "name": "테스트",
                    "provider": "google",
                    "providerId": "12312443546424335",
                    "token": "qeklnklviqoebbzscklb12312445",
                    "auth": 0,
                    "reg_date": "2022-05-04T15:00:00.000Z"
                  }
                ],
                "isSuccess": true,
                "code": 200
              }
            }
          },
          "400": {
            "description": "Bad Request (empty)",
            "schema": {
              "example": {
                "isSuccess": false,
                "code": 400,
                "message": "Failed to get Information of Users(empty)"
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "schema": {
              "example": {
                "isSuccess": false,
                "code": 500,
                "message": "Failed to get Information of Users"
              }
            }
          }
        }
      }
    },
    "/users/{providerId}": {
      "get": {
        "tags": ["User"],
        "summary": "특정 유저 정보",
        "description": "특정 유저의 providerId로 유저 정보를 받아옵니다.",
        "parameters": [
          {
            "name": "providerId",
            "description": "조회 대상 유저의 providerId Value",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "example": {
                "fetchResult": [
                  {
                    "email": "test123@gmail.com",
                    "name": "테스트1",
                    "provider": "google",
                    "providerId": "123124435",
                    "token": "qeklnklviqoebbzscklb12312445",
                    "auth": 0,
                    "location": "서울",
                    "preference": "음악",
                    "reg_date": "2022-05-07T15:00:00.000Z"
                  }
                ],
                "message": "Fetching User Information is successfully done",
                "isSuccess": true,
                "code": 200
              }
            }
          },
          "404": {
            "description": "Not Found(존재하지 않는 providerId에 대한 조회 요청)",
            "schema": {
              "example": {
                "isSuccess": false,
                "code": 404,
                "message": "Check id value."
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "schema": {
              "example": {
                "isSuccess": false,
                "code": 500,
                "message": "Failed to fetch user info."
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["User"],
        "summary": "유저 삭제",
        "description": "특정 유저의 providerId로 해당 유저 정보를 삭제합니다.",
        "parameters": [
          {
            "name": "providerId",
            "description": "삭제 대상 유저의 providerId Value",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "example": {
                "deleteResult": true,
                "message": "Deleting user is successfully done",
                "isSuccess": true,
                "code": 200
              }
            }
          },
          "404": {
            "description": "Not Found(존재하지 않는 providerId에 대한 삭제 요청)",
            "schema": {
              "example": {
                "isSuccess": false,
                "code": 404,
                "message": "Check id value."
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "schema": {
              "example": {
                "isSuccess": false,
                "code": 500,
                "message": "Failed to delete user."
              }
            }
          }
        }
      },
      "patch": {
        "tags": ["User"],
        "summary": "유저 정보 수정",
        "description": "특정 유저의 providerId로 해당 유저의 위치, 선호 컨텐츠 정보를 수정합니다.",
        "parameters": [
          {
            "name": "providerId",
            "description": "수정 대상 유저의 providerId Value",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "Content",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "location": {
                  "example": "String"
                },
                "preference": {
                  "example": "String"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "example": {
                "updateResult": [
                  {
                    "location": "서울",
                    "preference": "음악"
                  }
                ],
                "message": "Updating User Information is successfully done",
                "isSuccess": true,
                "code": 200
              }
            }
          },
          "400": {
            "description": "Bad Request (위치 및 선호도 정보(Request Body)가 존재하지 않음)",
            "schema": {
              "example": {
                "isSuccess": false,
                "code": 400,
                "message": "Please check input."
              }
            }
          },
          "404": {
            "description": "Not Found (존재하지 않는 사용자 ID에 대한 수정 요청)",
            "schema": {
              "example": {
                "isSuccess": false,
                "code": 400,
                "message": "Check id value."
              }
            }
          },
          "409": {
            "description": "Conflict(동일한 항목, 동일한 내용에 대한 수정 요청)",
            "schema": {
              "example": {
                "isSuccess": false,
                "code": 409,
                "message": "Can't Update. (original value and updating value is same)"
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "schema": {
              "example": {
                "isSuccess": false,
                "code": 500,
                "message": "Failed to update User Info."
              }
            }
          }
        }
      }
    },
    "/diaries":{
      "get":{
        "tags" : ["Diary"],
        "summary" : "전체 일기",
        "description" : "서비스에 등록된 모든 일기를 가져오는 API입니다.",
        "responses" : {
          "200": {
            "description": "OK",
            "schema": {
              "example": {
                "getAllResult": [
                  {
                    "id": 1,
                    "providerId": "123124435",
                    "content": "그녀의 모습을 목격하는 순간부터 내 가슴은 땅울림처럼 떨리고, 입안은 사막처럼 바싹 말라버린다.",
                    "emotion": "놀람",
                    "happy_score": 22.3,
                    "fear_score": 11.5,
                    "disgust_score": 8.7,
                    "anger_score": 5.7,
                    "neutral_score": 44.8,
                    "surprise_score": 3.7,
                    "sad_score": 3.3,
                    "contents_id": null,
                    "counselor_id": null,
                    "hashtag_1": "여행",
                    "hashtag_2": "스페인",
                    "hashtag_3": "비행기",
                    "written_date": "2022-05-16T15:00:00.000Z"
                  },
                  {
                      "id": 2,
                      "providerId": "435624563",
                      "content": "내가 지금 기억할 수 있는 것은, 그녀가 그다지 미인이 아니었다는 사실 뿐이다. 왠지 조금 이상하기도 하다.",
                      "emotion": "행복",
                      "happy_score": 11.5,
                      "fear_score": 8.7,
                      "disgust_score": 5.7,
                      "anger_score": 44.8,
                      "neutral_score": 3.7,
                      "surprise_score": 3.3,
                      "sad_score": 22.3,
                      "contents_id": null,
                      "counselor_id": null,
                      "hashtag_1": "마스크",
                      "hashtag_2": "빨래",
                      "hashtag_3": "카페",
                      "written_date": "2022-05-16T15:00:00.000Z"
                  },
                  {
                      "id": 3,
                      "providerId": "906457842",
                      "content": "그녀는 동에서 서로, 나는 서에서 동으로 걷고 있었다. 제법 기분이 좋은 4월의 아침이다.",
                      "emotion": "중립",
                      "happy_score": 8.7,
                      "fear_score": 5.7,
                      "disgust_score": 44.8,
                      "anger_score": 3.7,
                      "neutral_score": 3.3,
                      "surprise_score": 22.3,
                      "sad_score": 11.5,
                      "contents_id": null,
                      "counselor_id": null,
                      "hashtag_1": "독서",
                      "hashtag_2": "청소",
                      "hashtag_3": "게임",
                      "written_date": "2022-05-16T15:00:00.000Z"
                  }
                ],
                "isSuccess": true,
                "code": 200
              }
            }
          },
          "404": {
            "description": "Not Found (등록된 일기가 존재하지 않을 때)",
            "schema": {
              "example": {
                "isSuccess": false,
                "code": 400,
                "message": "There is no diary in Diary table."
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "schema": {
              "example": {
                "isSuccess": false,
                "code": 500,
                "message": "Failed to get diaries.(getAll)"
              }
            }
          }
        }
      }
    },
    "/diaries/{providerId}": {
      "post": {
        "tags": ["Diary"],
        "summary": "일기 작성",
        "description": "새로운 일기를 작성하는 API입니다.",
        "parameters": [
          {
            "name": "providerId",
            "description": "일기를 작성할 유저의 providerId Value",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "Content",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "content": {
                  "example": "String"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "example": {
                "writeResult": [
                  {
                    "id": 4,
                    "content": "제법 기분이 좋은 4월의 아침이다.",
                    "emotion": "행복",
                    "hashtag_1": "스케이트",
                    "hashtag_2": "독서",
                    "hashtag_3": "공부"
                  }
                ],
                "message": "Writing diary is successfully done",
                "isSuccess": true,
                "code": 200
              }
            }
          },
          "400": {
            "description": "Bad Request (일기 내용(Request Body)이 존재하지 않음)",
            "schema": {
              "example": {
                "isSuccess": false,
                "code": 400,
                "message": "Please check content input."
              }
            }
          },
          "404": {
            "description": "Not Found (존재하지 않는 사용자 ID에 대한 일기 작성 요청)",
            "schema": {
              "example": {
                "isSuccess": false,
                "code": 404,
                "message": "Check id value."
              }
            }
          },
          "409": {
            "description": "Conflict",
            "schema": {
              "example": {
                "isSuccess": false,
                "code": 409,
                "message": "You already wrote diary today."
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "schema": {
              "example": {
                "isSuccess": false,
                "code": 500,
                "message": "Failed to write diary."
              }
            }
          }
        }
      },
      "get": {
        "tags": ["Diary"],
        "summary": "사용자별 일기 정보",
        "description": "해당 사용자의 일기 작성 기록을 받아오는 API입니다.",
        "parameters": [
          {
            "name": "providerId",
            "description": "해당 유저의 providerId Value",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "example": {
                "fetchResult": [
                  {
                    "id": 1,
                    "providerId": "123124435",
                    "content": "그녀의 모습을 목격하는 순간부터 내 가슴은 땅울림처럼 떨리고, 입안은 사막처럼 바싹 말라버린다.",
                    "emotion": "놀람",
                    "happy_score": 22.3,
                    "fear_score": 11.5,
                    "disgust_score": 8.7,
                    "anger_score": 5.7,
                    "neutral_score": 44.8,
                    "surprise_score": 3.7,
                    "sad_score": 3.3,
                    "contents_id": null,
                    "counselor_id": null,
                    "hashtag_1": "여행",
                    "hashtag_2": "스페인",
                    "hashtag_3": "비행기",
                    "written_date": "2022-05-16T15:00:00.000Z"
                  }
                ],
                "isSuccess": true,
                "code": 200
              }
            }
          },
          "404": {
            "description": "Not Found (해당 유저가 일기를 작성한 기록이 없거나, 존재하지 않는 providerId에 대한 요청)",
            "schema": {
              "example": {
                "isSuccess": false,
                "code": 404,
                "message": "Check id value. / Diary doesn't exist"
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "schema": {
              "example": {
                "isSuccess": false,
                "code": 500,
                "message": "Failed to get diary.(getDiaryByProviderId)"
              }
            }
          }
        }
      }
    },
    "/diaries/details/{id}": {
      "delete": {
        "tags": ["Diary"],
        "summary": "일기 삭제",
        "description": "일기를 삭제하는 API입니다.",
        "parameters": [
          {
            "name": "id",
            "description": "삭제할 일기의 ID",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "example": {
                "deleteResult": true,
                "message": "Deleting diary is successfully done",
                "isSuccess": true,
                "code": 200
              }
            }
          },
          "404": {
            "description": "Not Found (존재하지 않는 일기 삭제 요청)",
            "schema": {
              "example": {
                "isSuccess": false,
                "code": 404,
                "message": "Check Diary id value."
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "schema": {
              "example": {
                "isSuccess": false,
                "code": 500,
                "message": "Failed to delete diary."
              }
            }
          }
        }
      },
      "get": {
        "tags": ["Diary"],
        "summary": "일기 세부 내용 조회",
        "description": "일기 Id로 해당 일기의 세부 내용을 조회하는 API입니다.",
        "parameters": [
          {
            "name": "id",
            "description": "조회할 일기의 ID",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "example": {
                "fetchResult": [
                  {
                    "id": 1,
                    "providerId": "123124435",
                    "content": "그녀의 모습을 목격하는 순간부터 내 가슴은 땅울림처럼 떨리고, 입안은 사막처럼 바싹 말라버린다.",
                    "emotion": "놀람",
                    "happy_score": 22.3,
                    "fear_score": 11.5,
                    "disgust_score": 8.7,
                    "anger_score": 5.7,
                    "neutral_score": 44.8,
                    "surprise_score": 3.7,
                    "sad_score": 3.3,
                    "contents_id": null,
                    "counselor_id": null,
                    "hashtag_1": "여행",
                    "hashtag_2": "스페인",
                    "hashtag_3": "비행기",
                    "written_date": "2022-05-16T15:00:00.000Z"
                  }
                ],
                "isSuccess": true,
                "code": 200
              }
            }
          },
          "404": {
            "description": "Not Found (존재하지 않는 일기 조회 요청)",
            "schema": {
              "example": {
                "isSuccess": false,
                "code": 404,
                "message": "Check Diary id value."
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "schema": {
              "example": {
                "isSuccess": false,
                "code": 500,
                "message": "Failed to get diary detail."
              }
            }
          }
        }
      },
      "patch": {
        "tags": ["Diary"],
        "summary": "일기 수정",
        "description": "수정할 내용을 입력해 일기를 수정하는 API입니다.",
        "parameters": [
          {
            "name": "id",
            "description": "수정할 일기의 ID",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "Content",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "content": {
                  "example": "String"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "example": {
                "updateResult": [
                  {
                    "id": 4,
                    "providerId": "230570871073345",
                    "content": "제법 기분이 좋은 4월의 아침이다.",
                    "emotion": "행복",
                    "hashtag_1": "운동",
                    "hashtag_2": "빨래",
                    "hashtag_3": "독서"
                  }
                ],
                "message": "Updating diary is successfully done",
                "isSuccess": true,
                "code": 200
              }
            }
          },
          "400": {
            "description": "Bad Request (일기 내용(Request Body)이 존재하지 않음)",
            "schema": {
              "example": {
                "isSuccess": false,
                "code": 400,
                "message": "Please check content input."
              }
            }
          },
          "404": {
            "description": "Not Found (존재하지 않는 일기 수정 요청)",
            "schema": {
              "example": {
                "isSuccess": false,
                "code": 404,
                "message": "Check Diary id value."
              }
            }
          },
          "409": {
            "description": "Conflict(기존 내용과 동일한데 수정 요청한 경우)",
            "schema": {
              "example": {
                "isSuccess": false,
                "code": 409,
                "message": "Can't Update. (original value and updating value is same)"
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "schema": {
              "example": {
                "isSuccess": false,
                "code": 500,
                "message": "Failed to update Diary."
              }
            }
          }
        }
      }
    },
    "/diaries/searchresults/{providerId}": {
      "get": {
        "tags": ["Diary"],
        "summary": "일기 검색",
        "description": "검색 내용을 입력해 일기 검색 결과를 가져오는 API입니다.",
        "parameters": [
          {
            "name": "providerId",
            "description": "일기를 검색할 유저의 providerId Value",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "Content",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "content": {
                  "example": "String"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "example": {
                "searchResult": [
                  {
                    "id": 4,
                    "providerId": "230570871073345",
                    "content": "제법 기분이 좋은 4월의 아침이다.",
                    "emotion": "행복",
                    "hashtag_1": "운동",
                    "hashtag_2": "빨래",
                    "hashtag_3": "독서",
                    "written_date": "2022-05-11T15:00:00.000Z"
                  }
                ],
                "isSuccess": true,
                "code": 200
              }
            }
          },
          "404": {
            "description": "Not Found (존재하지 않는 사용자 providerId로 검색 요청)",
            "schema": {
              "example": {
                "isSuccess": false,
                "code": 404,
                "message": "Check id value."
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "schema": {
              "example": {
                "isSuccess": false,
                "code": 500,
                "message": "Failed to search Diary."
              }
            }
          }
        }
      }
    },
    "/diaries/emotions/{id}": {
      "patch": {
        "tags": ["Diary"],
        "summary": "일기 감정 수정",
        "description": "수정할 감정을 입력해 일기 감정을 수정하는 API입니다.",
        "parameters": [
          {
            "name": "id",
            "description": "감정을 수정할 일기의 ID",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "Emotion",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "emotion": {
                  "example": "String"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "example": {
                "updateResult": [
                  {
                    "id": 3,
                    "content": "그녀는 동에서 서로, 나는 서에서 동으로 걷고 있었다. 제법 기분이 좋은 4월의 아침이다.",
                    "emotion": "행복"
                  }
                ],
                "message": "Updating emotion of diary is successfully done",
                "isSuccess": true,
                "code": 200
              }
            }
          },
          "400": {
            "description": "Bad Request (일기 감정(Request Body)이 존재하지 않음)",
            "schema": {
              "example": {
                "isSuccess": false,
                "code": 400,
                "message": "Please check emotion input."
              }
            }
          },
          "404": {
            "description": "Not Found (존재하지 않는 일기의 감정 수정 요청)",
            "schema": {
              "example": {
                "isSuccess": false,
                "code": 404,
                "message": "Check Diary id value."
              }
            }
          },
          "409": {
            "description": "Conflict(기존 감정과 동일한데 수정 요청한 경우)",
              "schema": {
                "example": {
                  "isSuccess": false,
                  "code": 409,
                  "message": "Can't Update. (original value and updating value is same)"
                }
              }
          },
          "500": {
            "description": "Internal Server Error",
            "schema": {
              "example": {
                "isSuccess": false,
                "code": 500,
                "message": "Failed to update emotion of diary."
              }
            }
          }
        }
      }
    },
    "/diaries/hashtags/{id}": {
      "patch": {
        "tags": ["Diary"],
        "summary": "일기 해시태그 수정",
        "description": "수정할 해시태그를 입력해 일기 해시태그를 수정하는 API입니다.",
        "parameters": [
          {
            "name": "id",
            "description": "해시태그를 수정할 일기의 ID",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "Hashtag",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "hashtag_1": {
                  "example": "String"
                },
                "hashtag_2": {
                  "example": "String"
                },
                "hashtag_3": {
                  "example": "String"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "example": {
                "updateResult": [
                  {
                    "id": 3,
                    "content": "그녀는 동에서 서로, 나는 서에서 동으로 걷고 있었다. 제법 기분이 좋은 4월의 아침이다.",
                    "hashtag_1": "학교",
                    "hashtag_2": "졸업",
                    "hashtag_3": "방황"
                  }
                ],
                "message": "Updating hashtag of diary is successfully done",
                "isSuccess": true,
                "code": 200
              }
            }
          },
          "400": {
            "description": "Bad Request (일기 해시태그(Request Body)가 존재하지 않음)",
            "schema": {
              "example": {
                "isSuccess": false,
                "code": 400,
                "message": "Please check hashtag input."
              }
            }
          },
          "404": {
            "description": "Not Found (존재하지 않는 일기의 해시태그 수정 요청)",
            "schema": {
              "example": {
                "isSuccess": false,
                "code": 404,
                "message": "Check Diary id value."
              }
            }
          },
          "409": {
            "description": "Conflict(기존 해시태그와 동일한 정보 또는 중복된 해시태그를 통해 수정 요청한 경우)",
              "schema": {
                "example": {
                  "isSuccess": false,
                  "code": 409,
                  "message": "Can't Update. (Updated to same value or Requested with duplicated hashtags)"
                }
              }
          },
          "500": {
            "description": "Internal Server Error",
            "schema": {
              "example": {
                "isSuccess": false,
                "code": 500,
                "message": "Failed to update hashtag of diary."
              }
            }
          }
        }
      }
    }
  }
}
